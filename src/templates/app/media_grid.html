{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
  {% if media_type == "tv" %}
    TV shows - Yamtrack
  {% else %}
    {{ media_type|title }}s - Yamtrack
  {% endif %}
{% endblock title %}

{% block container %}
  {% if media_list %}
    <div class="mb-3">
      <button type="button"
              class="btn btn-secondary"
              data-bs-toggle="modal"
              data-bs-target="#filter-modal">
        <i class="bi bi-funnel-fill"></i>
      </button>
      <div class="modal fade" id="filter-modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-sm modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-body">
              <form method="get">
                {{ filter_form|crispy }}
                <div class="text-center">
                  <button class="btn btn-secondary" type="submit">Filter</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="grid">{% include "app/components/media_grid_items.html" %}</div>

    {% if media_list.has_next %}
      <div id="loading-indicator-{{ current_page }}"
           class="htmx-indicator d-flex justify-content-center mt-5 mb-3"
           hx-swap-oob="true">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    {% endif %}

  {% else %}
    <div class="no-content">
      <div>
        <h1 class="text-center fs-3">
          {% if media_type == "tv" %}
            Your tv show tracker is empty.
          {% else %}
            Your {{ media_type }} tracker is empty.
          {% endif %}
        </h1>
        <p class="text-center">
          {% if media_type == "tv" %}
            Why not start by adding your favorite tv shows?
          {% else %}
            Why not start by adding your favorite {{ media_type }}s?
          {% endif %}
        </p>
      </div>
    </div>
  {% endif %}
{% endblock container %}
